<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Zelda's Cookbook</title>

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #536f50;
        }

        h1 {
            font-size: 1.5rem;
            color: #fdffe0;
        }

        .pot {
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
            border: .1rem solid #fdffe0;
        }

        .countertop {
            display: flex;
            flex-wrap: wrap;
            justify-content:space-evenly;
            border: .1rem solid #fdffe0;
        }

        .item {
            flex: 0 0 80px;
            border: .1rem solid red;
            margin: 5px;
            width: 80px;
            height: 80px;
        }

        .item-img {
            object-fit:cover;
            max-width: 100%;
            max-height: 100%;
        }

        .empty, .result, .filled {
            border: .1rem solid #fdffe0;
            width: 150px;
            height: 150px;
            margin: 10px;
            font-size: 7rem;
            text-align: center;
        }

        .ingredient {
            border: .1rem solid #fdffe0;
            width: 50px;
            height: 50px;
            margin: 10px;
            font-size: 2.5em;
            text-align: center;
            /* vertical-align: center; */
        }

        .filled {
            background-color: #86a5a9;
        }

        .result {
            font-size: 7rem;
            text-align: center;
            /* vertical-align: center; */
        }
    </style>
</head>
<body>
    <header>
        <h1>Zelda's Cookbook</h1>
    </header>
    <div class="pot">
        <div class="box empty"></div>
        <div class="box empty"></div>
        <div class="box empty"></div>
        <div class="box empty"></div>
        <div class="result">0</div>
    </div>
    <div class="countertop">
        
    </div>
    <!-- <div class="counter">
        <div class="ingredient" data-num="one">1</div>
        <div class="ingredient" data-num="two">2</div>
        <div class="ingredient" data-num="three">3</div>
        <div class="ingredient" data-num="four">4</div>
        <div class="ingredient" data-num="five">5</div>
        <div class="ingredient" data-num="six">6</div>
        <div class="ingredient" data-num="seven">7</div>
        <div class="ingredient" data-num="eight">8</div>
        <div class="ingredient" data-num="nine">9</div>
        <div class="ingredient" data-num="ten">10</div>
        <div class="ingredient" data-num="eleven">11</div>
    </div> -->

    <script>
        // Each ingredient contributes its bonus HP and/or time at most once per recipe
        const zeldaData = {
            "Palm Fruit" : { type : "None", category : "Fruit", price : 4, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Apple" : { type : "None", category : "Fruit", price : 3, baseHP : 2, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Wildberry" : { type : "None", category : "Fruit", price : 3, baseHP : 2, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Hylian Shroom" : { type : "None", category : "Mushroom", price : 3, baseHP : 2, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Hyrule Herb" : { type : "None", category : "Vegetable", price : 3, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Gourmet Meat" : { type : "None", category : "Meat", price : 35, baseHP : 12, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Prime Meat" : { type : "None", category : "Meat", price : 15, baseHP : 6, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Meat" : { type : "None", category : "Meat", price : 8, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Whole Bird" : { type : "None", category : "Poultry", price : 35, baseHP : 12, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Bird Thigh" : { type : "None", category : "Poultry", price : 15, baseHP : 6, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Raw Bird Drumstick" : { type : "None", category : "Poultry", price : 8, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Hyrule Bass" : { type : "None", category : "Fish", price : 6, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Sanke Carp" : { type : "None", category : "Fish", price : 20, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 },
            "Hylian Rice" : { type : "None", category : "Spice", price : 3, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 30, critChance : 0 },
            "Bird Egg" : { type : "None", category : "Egg", price : 3, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 60, critChance : .1 },
            "Tabantha Wheat" : { type : "None", category : "Spice", price : 3, baseHP : 4, bonusHP : 0, baseTime : 30, bonusTime : 30, critChance : 0 },
            // Milk bonus applies only if the recipe contains no non-Milk ingredients
            "Fresh Milk" : { type : "None", category : "Milk", price : 3, baseHP : 2, bonusHP : 2, baseTime : 30, bonusTime : 50, critChance : 0 },
            // Nut bonus applies when cooked with at least one ingredient that is different from itself (combining both types of nut works, and gives both bonuses)
            "Acorn" : { type : "None", category : "Nut", price : 2, baseHP : 1, bonusHP : 2, baseTime : 30, bonusTime : 20, critChance : 0 },
            "Chickaloo Tree Nut" : { type : "None", category : "Nut", price : 3, baseHP : 1, bonusHP : 2, baseTime : 30, bonusTime : 10, critChance : 0 },
            "Cane Sugar" : { type : "None", category : "Spice", price : 3, baseHP : 0, bonusHP : 0, baseTime : 30, bonusTime :  50, critChance : .3 },
            "Goat Butter" : { type : "None", category : "Spice", price : 3, baseHP : 0, bonusHP : 0, baseTime : 30, bonusTime :  50, critChance : .1 },
            "Goron Spice" : { type : "None", category : "Spice", price : 4, baseHP : 0, bonusHP : 0, baseTime : 30, bonusTime : 60, critChance : .1 },
            "Rock Salt" : { type : "None", category : "Spice", price : 2, baseHP : 0, bonusHP : 0, baseTime : 30, bonusTime : 30, critChance : 0 },
            "Monster Extract" : { type : "None", category : "Spice", price : 3, baseHP : 0, bonusHP : 0, baseTime : 0, bonusTime : 0, critChance : 0 },
            "Fairy" : { type : "None", category : "Fairy", price : 2, baseHP : 20, bonusHP : 0, baseTime : 30, bonusTime : 0, critChance : 0 }
        };

        const counterTop = document.querySelector(".countertop");
        for (const item in zeldaData) {
            const markup = `
                <div class="item" data-item="${item}">
                    <img class="item-img" src="img/${item}.png" alt="${item}">
                </div>
            `;
            counterTop.innerHTML += markup;
        }

        const data = {
            "one" : 1,
            "two" : 2,
            "three" : 3,
            "four" : 4,
            "five" : 5,
            "six" : 6,
            "seven" : 7,
            "eight" : 8,
            "nine" : 9,
            "ten" : 10
        };

        const potItems = document.querySelectorAll(".box");
        const counterItems = document.querySelectorAll(".item");
        const result = document.querySelector(".result");

        const potArray = [];
        for (const potItem of potItems) {
            potItem.addEventListener("dblclick", doubleClicked);
            potArray.push(potItem);
        }
        for (const counterItem of counterItems) counterItem.addEventListener("click", clicked);

        function clicked() {
            for (const potItem of potArray) {
                if (potItem.classList.contains("empty")) {
                    potItem.classList.replace("empty", "filled");
                    potItem.setAttribute("data-item", this.getAttribute("data-item"));
                    const item = this.getAttribute("data-item");
                    potItem.innerHTML = `<img class="item-img" src="img/${item}.png" alt="${item}">`
                    break;
                }
            };
            // if (this.classList.contains("empty")) {
            //     this.classList.replace("empty", "filled");
            //     this.setAttribute("data-num", "one");
            // } else {
            //     this.classList.replace("filled", "empty");
            //     this.removeAttribute("data-num");
            // }
            cook(); 
        }

        function doubleClicked() {
            if (this.classList.contains("filled")) {
                this.classList.replace("filled", "empty");
                this.removeAttribute("data-item");
                this.innerHTML = "";
            }
            cook();
        }

        function cook() {
            const ingredients = document.querySelectorAll('.filled');
            let total = 0;
            for (const ingredient of ingredients) {
                total += zeldaData[ingredient.getAttribute("data-item")].price;
            }
            let baseHP = 0;
            let bonusHP = 0;
            for (let i = 0; i < ingredients.length; i++) {
                const ingredient = ingredients[i];
                baseHP += zeldaData[ingredient.getAttribute("data-item")].baseHP;
                bonusHP += zeldaData[ingredient.getAttribute("data-item")].bonusHP;
            }
            result.innerHTML = (2*baseHP) + bonusHP;
        }
    </script>
</body>
</html>